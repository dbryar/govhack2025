(()=>{var e=class{baseUrl;constructor(e=""){this.baseUrl=e}async transliterate(e){const t=await fetch(`${this.baseUrl}/transliterate`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}async getTransliteration(e){const t=await fetch(`${this.baseUrl}/transliterate/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}async submitFeedback(e,t){const n=await fetch(`${this.baseUrl}/transliterate/${e}/feedback`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`)}},t=class{service;currentResult=null;constructor(){this.service=new e,this.initializeEventListeners()}initializeEventListeners(){const e=document.getElementById("transliteration-form"),t=document.getElementById("feedback-form");e&&e.addEventListener("submit",this.handleTransliteration.bind(this)),t&&t.addEventListener("submit",this.handleFeedback.bind(this))}async handleTransliteration(e){e.preventDefault();const o=e.target,t=new FormData(o),s={text:t.get("text"),output_script:t.get("output_script")},n=t.get("input_script");n&&n!=="auto"&&(s.input_script=n);try{this.showLoading(!0),this.currentResult=await this.service.transliterate(s),this.displayResult(this.currentResult)}catch(e){this.displayError(e instanceof Error?e.message:"An error occurred")}finally{this.showLoading(!1)}}async handleFeedback(e){if(e.preventDefault(),!this.currentResult){this.displayError("No transliteration result to provide feedback for");return}const n=e.target,t=new FormData(n),s={suggested_output:t.get("suggested_output"),feedback_type:t.get("feedback_type"),user_context:t.get("user_context")||void 0};try{await this.service.submitFeedback(this.currentResult.id,s),this.displaySuccessMessage("Feedback submitted successfully!"),n.reset()}catch(e){this.displayError(e instanceof Error?e.message:"Failed to submit feedback")}}displayResult(e){const t=document.getElementById("result"),n=document.getElementById("feedback-section");if(t&&(t.innerHTML=`
        <h3>Transliteration Result</h3>
        <div class="result-item">
          <strong>Input:</strong> ${this.escapeHtml(e.input_text)}
        </div>
        <div class="result-item">
          <strong>Output:</strong> ${this.escapeHtml(e.output_text)}
        </div>
        <div class="result-item">
          <strong>Input Script:</strong> ${this.escapeHtml(e.input_script)}
        </div>
        <div class="result-item">
          <strong>Output Script:</strong> ${this.escapeHtml(e.output_script)}
        </div>
        ${e.confidence_score?`<div class="result-item">
          <strong>Confidence:</strong> ${(e.confidence_score*100).toFixed(1)}%
        </div>`:""}
        <div class="result-item">
          <strong>ID:</strong> <code>${e.id}</code>
        </div>
      `,t.style.display="block"),n){n.style.display="block";const t=document.getElementById("suggested_output");t&&(t.value=e.output_text)}}displayError(e){const t=document.getElementById("error");t&&(t.textContent=e,t.style.display="block");const n=document.getElementById("success");n&&(n.style.display="none")}displaySuccessMessage(e){const t=document.getElementById("success");t&&(t.textContent=e,t.style.display="block");const n=document.getElementById("error");n&&(n.style.display="none"),setTimeout(()=>{t&&(t.style.display="none")},3e3)}showLoading(e){const n=document.getElementById("loading"),t=document.getElementById("submit-button");if(n&&(n.style.display=e?"block":"none"),t&&(t.disabled=e,t.textContent=e?"Transliterating...":"Transliterate"),e){const e=document.getElementById("result"),t=document.getElementById("error"),n=document.getElementById("success");e&&(e.style.display="none"),t&&(t.style.display="none"),n&&(n.style.display="none")}}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}};document.addEventListener("DOMContentLoaded",()=>{new t})})()